{% comment %}
  Coffee Subscription Card - Horizontal Layout with Direct Checkout
  
  SETUP INSTRUCTIONS:
  1. Shopify Admin ‚Üí Online Store ‚Üí Themes ‚Üí Edit Code
  2. Sections folder ‚Üí Add a new section
  3. Name it: subscription-card-horizontal
  4. Paste this entire code and Save
  5. Go to Theme Customizer ‚Üí Add Section ‚Üí Coffee Subscription Card
  6. Add your Product Variant ID in the settings
  7. Customer clicks "Subscribe & Save" ‚Üí Goes directly to checkout!
{% endcomment %}

{%- liquid
  assign variant_id = section.settings.product_variant_id
  assign product_handle = section.settings.product_handle
  
  if variant_id != blank
    assign checkout_url = '/cart/' | append: variant_id | append: ':1?checkout'
  elsif product_handle != blank
    assign product = all_products[product_handle]
    if product.variants.first.id != blank
      assign checkout_url = '/cart/' | append: product.variants.first.id | append: ':1?checkout'
    else
      assign checkout_url = '/products/' | append: product_handle
    endif
  else
    assign checkout_url = '#'
  endif
-%}

<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Fraunces:wght@600;700&display=swap');

  .subscription-section-{{ section.id }} {
    font-family: 'DM Sans', sans-serif;
    background: {{ section.settings.background_color }};
    padding: {{ section.settings.padding_top }}px 20px {{ section.settings.padding_bottom }}px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .subscription-wrapper-{{ section.id }} {
    max-width: 1200px;
    width: 100%;
  }

  .section-header-{{ section.id }} {
    text-align: center;
    margin-bottom: 40px;
  }

  .section-main-title-{{ section.id }} {
    font-family: 'Fraunces', serif;
    font-size: 42px;
    font-weight: 700;
    color: {{ section.settings.title_color }};
    margin: 0 0 16px;
    line-height: 1.2;
  }

  .section-description-{{ section.id }} {
    font-size: 18px;
    color: #6B6560;
    margin: 0;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    line-height: 1.6;
  }

  .subscription-card-{{ section.id }} {
    background: {{ section.settings.card_background }};
    border-radius: 20px;
    box-shadow: 0 4px 24px rgba(139, 90, 43, 0.08), 0 1px 3px rgba(139, 90, 43, 0.04);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
  }

  .subscription-card-{{ section.id }}:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 40px rgba(139, 90, 43, 0.12), 0 4px 12px rgba(139, 90, 43, 0.06);
  }

  .card-left-{{ section.id }} {
    padding: 40px;
    display: flex;
    flex-direction: column;
  }

  .card-right-{{ section.id }} {
    padding: 40px;
    background: linear-gradient(135deg, #FEF7F0 0%, #FDF3E9 100%);
    display: flex;
    flex-direction: column;
    justify-content: center;
    border-left: 1px solid #F5E6D8;
  }

  .card-title-{{ section.id }} {
    font-family: 'Fraunces', serif;
    font-size: 28px;
    font-weight: 700;
    color: {{ section.settings.title_color }};
    margin: 0 0 24px;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .card-title-icon-{{ section.id }} {
    width: 28px;
    height: 28px;
    color: {{ section.settings.accent_color }};
  }

  .quantity-display-{{ section.id }} {
    background: linear-gradient(135deg, #FEF7F0 0%, #FDF3E9 100%);
    border: 1px solid #F5E6D8;
    border-radius: 12px;
    padding: 24px;
    display: flex;
    justify-content: center;
    gap: 40px;
    margin-bottom: 20px;
  }

  .quantity-item-{{ section.id }} {
    text-align: center;
  }

  .quantity-number-{{ section.id }} {
    font-family: 'Fraunces', serif;
    font-size: 48px;
    font-weight: 700;
    color: {{ section.settings.accent_color }};
    line-height: 1;
    margin-bottom: 6px;
  }

  .quantity-label-{{ section.id }} {
    font-size: 13px;
    font-weight: 500;
    color: #6B6560;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .quantity-divider-{{ section.id }} {
    width: 1px;
    background: #E8DDD3;
  }

  .delivery-note-{{ section.id }} {
    text-align: center;
    font-size: 14px;
    color: #8A847D;
    margin-bottom: 24px;
  }

  .features-title-{{ section.id }} {
    font-size: 15px;
    font-weight: 600;
    color: {{ section.settings.title_color }};
    margin: 0 0 16px;
  }

  .features-list-{{ section.id }} {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .features-list-{{ section.id }} li {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    font-size: 15px;
    color: #4A4744;
    margin-bottom: 14px;
    line-height: 1.5;
  }

  .features-list-{{ section.id }} li:last-child {
    margin-bottom: 0;
  }

  .check-icon-{{ section.id }} {
    width: 20px;
    height: 20px;
    color: {{ section.settings.accent_color }};
    flex-shrink: 0;
    margin-top: 1px;
  }

  .price-section-{{ section.id }} {
    margin-bottom: 24px;
  }

  .price-row-{{ section.id }} {
    display: flex;
    align-items: baseline;
    gap: 12px;
    margin-bottom: 8px;
    flex-wrap: wrap;
  }

  .price-main-{{ section.id }} {
    font-family: 'Fraunces', serif;
    font-size: 42px;
    font-weight: 700;
    color: {{ section.settings.title_color }};
  }

  .price-period-{{ section.id }} {
    font-size: 18px;
    color: #6B6560;
  }

  .save-badge-{{ section.id }} {
    background: {{ section.settings.badge_background }};
    color: {{ section.settings.badge_text_color }};
    font-size: 12px;
    font-weight: 600;
    padding: 5px 12px;
    border-radius: 20px;
  }

  .price-note-{{ section.id }} {
    font-size: 14px;
    color: #8A847D;
    margin: 0 0 24px;
  }

  .benefits-list-{{ section.id }} {
    list-style: none;
    padding: 0;
    margin: 0 0 28px;
  }

  .benefits-list-{{ section.id }} li {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 15px;
    color: #4A4744;
    margin-bottom: 12px;
  }

  .benefits-list-{{ section.id }} li:last-child {
    margin-bottom: 0;
  }

  .benefit-icon-{{ section.id }} {
    width: 20px;
    height: 20px;
    color: {{ section.settings.accent_color }};
    flex-shrink: 0;
  }

  .subscribe-btn-{{ section.id }} {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    width: 100%;
    padding: 18px 28px;
    background: {{ section.settings.button_background }};
    color: {{ section.settings.button_text_color }};
    font-family: 'DM Sans', sans-serif;
    font-size: 17px;
    font-weight: 600;
    border: none;
    border-radius: 12px;
    cursor: pointer;
    text-decoration: none;
    transition: all 0.25s ease;
    box-shadow: 0 4px 12px rgba(196, 125, 78, 0.3);
  }

  .subscribe-btn-{{ section.id }}:hover {
    opacity: 0.9;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(196, 125, 78, 0.4);
    color: {{ section.settings.button_text_color }};
  }

  .subscribe-btn-{{ section.id }}:active {
    transform: translateY(0);
  }

  .btn-arrow-{{ section.id }} {
    width: 20px;
    height: 20px;
    transition: transform 0.25s ease;
  }

  .subscribe-btn-{{ section.id }}:hover .btn-arrow-{{ section.id }} {
    transform: translateX(4px);
  }

  @media (max-width: 968px) {
    .subscription-card-{{ section.id }} {
      grid-template-columns: 1fr;
    }

    .card-right-{{ section.id }} {
      border-left: none;
      border-top: 1px solid #F5E6D8;
    }

    .section-main-title-{{ section.id }} {
      font-size: 36px;
    }

    .section-description-{{ section.id }} {
      font-size: 16px;
    }
  }

  @media (max-width: 600px) {
    .subscription-section-{{ section.id }} {
      padding: 40px 16px;
    }

    .card-left-{{ section.id }},
    .card-right-{{ section.id }} {
      padding: 28px 20px;
    }

    .section-main-title-{{ section.id }} {
      font-size: 32px;
    }

    .section-header-{{ section.id }} {
      margin-bottom: 30px;
    }

    .quantity-number-{{ section.id }} {
      font-size: 40px;
    }

    .price-main-{{ section.id }} {
      font-size: 36px;
    }
  }
</style>

<section class="subscription-section-{{ section.id }}">
  <div class="subscription-wrapper-{{ section.id }}">
    {%- if section.settings.section_title != blank or section.settings.section_description != blank -%}
      <div class="section-header-{{ section.id }}">
        {%- if section.settings.section_title != blank -%}
          <h2 class="section-main-title-{{ section.id }}">{{ section.settings.section_title }}</h2>
        {%- endif -%}
        {%- if section.settings.section_description != blank -%}
          <p class="section-description-{{ section.id }}">{{ section.settings.section_description }}</p>
        {%- endif -%}
      </div>
    {%- endif -%}

    <article class="subscription-card-{{ section.id }}">
      <div class="card-left-{{ section.id }}">
        <h3 class="card-title-{{ section.id }}">
          <svg class="card-title-icon-{{ section.id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 8h1a4 4 0 1 1 0 8h-1"/>
            <path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V8z"/>
            <line x1="6" y1="2" x2="6" y2="4"/>
            <line x1="10" y1="2" x2="10" y2="4"/>
            <line x1="14" y1="2" x2="14" y2="4"/>
          </svg>
          {{ section.settings.card_title }}
        </h3>

        <div class="quantity-display-{{ section.id }}">
          <div class="quantity-item-{{ section.id }}">
            <div class="quantity-number-{{ section.id }}">{{ section.settings.bags_quantity }}</div>
            <div class="quantity-label-{{ section.id }}">{{ section.settings.bags_label }}</div>
          </div>
          <div class="quantity-divider-{{ section.id }}"></div>
          <div class="quantity-item-{{ section.id }}">
            <div class="quantity-number-{{ section.id }}">{{ section.settings.pouches_quantity }}</div>
            <div class="quantity-label-{{ section.id }}">{{ section.settings.pouches_label }}</div>
          </div>
        </div>
        <p class="delivery-note-{{ section.id }}">{{ section.settings.delivery_note }}</p>

        <h4 class="features-title-{{ section.id }}">{{ section.settings.features_title }}</h4>
        <ul class="features-list-{{ section.id }}">
          {%- for block in section.blocks -%}
            {%- if block.type == 'feature' -%}
              <li {{ block.shopify_attributes }}>
                <svg class="check-icon-{{ section.id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
                {{ block.settings.feature_text }}
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>
      </div>

      <div class="card-right-{{ section.id }}">
        <div class="price-section-{{ section.id }}">
          <div class="price-row-{{ section.id }}">
            <span class="price-main-{{ section.id }}">{{ section.settings.price }}</span>
            <span class="price-period-{{ section.id }}">{{ section.settings.price_period }}</span>
            {%- if section.settings.show_badge -%}
              <span class="save-badge-{{ section.id }}">{{ section.settings.badge_text }}</span>
            {%- endif -%}
          </div>
          <p class="price-note-{{ section.id }}">{{ section.settings.price_note }}</p>
        </div>

        <ul class="benefits-list-{{ section.id }}">
          {%- for block in section.blocks -%}
            {%- if block.type == 'benefit' -%}
              <li {{ block.shopify_attributes }}>
                <svg class="benefit-icon-{{ section.id }}" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                </svg>
                {{ block.settings.benefit_text }}
              </li>
            {%- endif -%}
          {%- endfor -%}
        </ul>

        {%- comment -%} 
          ‚≠ê DIRECT CHECKOUT BUTTON - CONFIGURED HERE ‚≠ê
          This button uses the checkout_url variable defined at the top
          Format: /cart/VARIANT_ID:1?checkout
        {%- endcomment -%}
        <a href="{{ checkout_url }}" class="subscribe-btn-{{ section.id }}">
          <span>{{ section.settings.button_text }}</span>
          <svg class="btn-arrow-{{ section.id }}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
            <line x1="5" y1="12" x2="19" y2="12"/>
            <polyline points="12 5 19 12 12 19"/>
          </svg>
        </a>
      </div>
    </article>
  </div>
</section>

{% schema %}
{
  "name": "Coffee Subscription Card",
  "tag": "section",
  "class": "coffee-subscription-section",
  "settings": [
    {
      "type": "header",
      "content": "‚öôÔ∏è IMPORTANT - Product Configuration"
    },
    {
      "type": "paragraph",
      "content": "üî• TWO EASY OPTIONS - Choose one:"
    },
    {
      "type": "paragraph",
      "content": "OPTION 1 (Easiest): Just enter your product handle below (Example: coffee-starter)"
    },
    {
      "type": "paragraph",
      "content": "OPTION 2: Use Variant ID - Go to Products ‚Üí [Your Product] ‚Üí Click variant ‚Üí Copy the number from URL after '/variants/'"
    },
    {
      "type": "text",
      "id": "product_variant_id",
      "label": "‚ö° Product Variant ID (Option 1)",
      "info": "Paste your variant ID here - Example: 42345678901234",
      "placeholder": "Enter variant ID (optional if using handle below)"
    },
    {
      "type": "text",
      "id": "product_handle",
      "label": "üîó Product Handle (Option 2 - Easier!)",
      "info": "Your product handle: coffee-starter",
      "default": "coffee-starter",
      "placeholder": "coffee-starter"
    },
    {
      "type": "header",
      "content": "üìù Section Header"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Main Title",
      "default": "Start Your Coffee Journey"
    },
    {
      "type": "textarea",
      "id": "section_description",
      "label": "Description",
      "default": "Get premium Vietnamese coffee delivered to your door every month. Choose your flavors, enjoy the convenience."
    },
    {
      "type": "header",
      "content": "‚òï Card Content"
    },
    {
      "type": "text",
      "id": "card_title",
      "label": "Card Title",
      "default": "Coffee Starter"
    },
    {
      "type": "text",
      "id": "bags_quantity",
      "label": "Number of Bags",
      "default": "2"
    },
    {
      "type": "text",
      "id": "bags_label",
      "label": "Bags Label",
      "default": "Bags"
    },
    {
      "type": "text",
      "id": "pouches_quantity",
      "label": "Number of Pouches",
      "default": "24"
    },
    {
      "type": "text",
      "id": "pouches_label",
      "label": "Pouches Label",
      "default": "Pouches"
    },
    {
      "type": "text",
      "id": "delivery_note",
      "label": "Delivery Note",
      "default": "Delivered monthly"
    },
    {
      "type": "text",
      "id": "features_title",
      "label": "Features Section Title",
      "default": "What You Get:"
    },
    {
      "type": "header",
      "content": "üí∞ Pricing"
    },
    {
      "type": "text",
      "id": "price",
      "label": "Price",
      "default": "$45.99",
      "info": "Main price to display"
    },
    {
      "type": "text",
      "id": "price_period",
      "label": "Price Period",
      "default": "/ month"
    },
    {
      "type": "text",
      "id": "price_note",
      "label": "Price Note",
      "default": "$22.99 per bag ‚Äî perfect for everyday drinkers",
      "info": "Additional pricing details"
    },
    {
      "type": "checkbox",
      "id": "show_badge",
      "label": "Show Save Badge",
      "default": true
    },
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge Text",
      "default": "Save 8%"
    },
    {
      "type": "header",
      "content": "üîò Button Settings"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Subscribe & Save"
    },
    {
      "type": "header",
      "content": "üé® Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section Background",
      "default": "#FDF8F3"
    },
    {
      "type": "color",
      "id": "card_background",
      "label": "Card Background",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#2D2A26"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color (Icons & Numbers)",
      "default": "#C47D4E"
    },
    {
      "type": "color",
      "id": "button_background",
      "label": "Button Background",
      "default": "#C47D4E"
    },
    {
      "type": "color",
      "id": "button_text_color",
      "label": "Button Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "badge_background",
      "label": "Save Badge Background",
      "default": "#E8F5E9"
    },
    {
      "type": "color",
      "id": "badge_text_color",
      "label": "Save Badge Text Color",
      "default": "#2E7D32"
    },
    {
      "type": "header",
      "content": "üìè Spacing"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "default": 60,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        {
          "type": "text",
          "id": "feature_text",
          "label": "Feature Text",
          "default": "2 bags with 24 pouches ‚Äî any mix of flavors you like"
        }
      ]
    },
    {
      "type": "benefit",
      "name": "Benefit Item",
      "settings": [
        {
          "type": "text",
          "id": "benefit_text",
          "label": "Benefit Text",
          "default": "Choose your flavors"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Coffee Subscription Card",
      "blocks": [
        {
          "type": "feature",
          "settings": {
            "feature_text": "2 bags with 24 pouches ‚Äî any mix of flavors you like"
          }
        },
        {
          "type": "feature",
          "settings": {
            "feature_text": "Each pouch makes 8-12 oz of bold Vietnamese coffee"
          }
        },
        {
          "type": "feature",
          "settings": {
            "feature_text": "Perfect for 1 cup a day throughout the month"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Choose your flavors"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Flexible delivery schedule"
          }
        },
        {
          "type": "benefit",
          "settings": {
            "benefit_text": "Pause or cancel anytime"
          }
        }
      ]
    }
  ]
}
{% endschema %}